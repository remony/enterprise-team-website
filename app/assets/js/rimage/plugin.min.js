tinymce.PluginManager.add("rImage",function(b,a){b.addButton("rImage",{text:"rImage",icon:false,onclick:function(){b.windowManager.open({title:"Select an image",body:[{type:"textbox",title:"file",name:"file",subtype:"file",label:"Upload"}],onsubmit:function(g,k,j){var h=angular.element(document.querySelector("body")).injector().get("$http");var i="http://46.101.32.73:8080/api/file";console.error(b.selection.getNode());var d=new FormData();var c=document.querySelector("input[type=file]").files;d.append("file",c[0]);console.log(d);var f=new FormData();f.append("file",c);f.append("event_id","1");f.append("news_id","-1");f.append("page_id","-1");var l=new XMLHttpRequest();l.withCredentials=true;l.addEventListener("readystatechange",function(){if(this.readyState===this.DONE){console.log(this.responseText)}});l.open("POST","http://46.101.32.73:8080/api/file");l.send(f)}})}});b.addMenuItem("rImage",{text:"rImage",context:"tools",onclick:function(){b.windowManager.open({title:"My html dialog",url:"./dialog.html",width:700,height:600})}})});