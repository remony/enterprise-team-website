"use strict";angular.module("app.news",["ngRoute"]).config(["$routeProvider",function(t){t.when("/news",{templateUrl:"views/news/news.html",controller:"newsCtrl"})}]).controller("newsCtrl",["$scope","$http",function(t,e){t.title="news",e({url:"http://localhost:8080/news",method:"GET",dataType:"json",data:"",headers:{"Content-Type":"application/json; charset=utf-8",page:1,pagesize:5}}).success(function(e,o,n,r){t.news=e.allnews,console.log(e)}).error(function(e,o,n,r){t.error=!0})}]).config(["$routeProvider",function(t){t.when("/news/:slug",{templateUrl:"views/news/newsarticle.html",controller:"newsArticleCtrl"})}]).controller("newsArticleCtrl",["$scope","$http","$routeParams",function(t,e,o){e({url:"http://localhost:8080/news/"+o.slug,method:"GET",dataType:"json",data:"",headers:{"Content-Type":"application/json; charset=utf-8"}}).success(function(e,o,n,r){t.title=e.article[0].title,t.article=e.article[0],console.log(e.article[0])}).error(function(e,o,n,r){t.error=!0})}]).config(["$routeProvider",function(t){t.when("/news/:slug/edit",{templateUrl:"views/news/newsArticleEditor.html",controller:"newsArticleEditorCtrl"})}]).controller("newsArticleEditorCtrl",["$scope","$http","$routeParams","toastr","$location","FileUploader",function(t,e,o,n,r,l){var i=o.slug;t.uploader=new l,t.uploader.url="http://localhost:8080/file",t.uploader.formData={news_id:0,event_id:-1,page_id:-1},t.tinymceOptions={onChange:function(t){},inline:!1,plugins:"advlist autolink link image lists charmap print preview youtube rImage",toolbar:"youtube rImage",external_plugins:{rImage:"/assets/js/rimage/plugin.js"},theme:"modern",skin:"light"},e({url:"http://localhost:8080/news/"+i,method:"GET",dataType:"json",data:"",headers:{"Content-Type":"application/json; charset=utf-8"}}).success(function(e,o,n,r){t.editor={},t.editor.title=e.article[0].title,t.editor.content=e.article[0].text,console.log(e.article[0])}).error(function(e,o,n,r){t.error=!0}),t.update=function(o){var l=t.editor.title,s=(t.editor.content,"admin");console.log(o),e({url:"http://localhost:8080/news/"+i,method:"POST",dataType:"json",data:t.editor.content,headers:{"Content-Type":"application/json; charset=utf-8",title:l,permission:s}}).success(function(t,e,o){console.log(t),r.path("/news/"+i+"/edit"),n.success("News article updated!",'<a href="localhost:8080/news.'+i+'">View post</a>',{allowHtml:!0,closeButton:!0})}).error(function(t,e,o){n.error("Login Success","Article failed to Update :(")})}}]).config(["$routeProvider",function(t){t.when("/admin/news/add",{templateUrl:"views/news/newsArticleEditor.html",controller:"newsArticleEditorNewCtrl"})}]).controller("newsArticleEditorNewCtrl",["$scope","$http","$routeParams","toastr","$location",function(t,e,o,n,r){t.title="New News Article",t.editor={},t.editor.title="example title",t.editor.content="<h1>title</h1><p>Hello</p>",t.tinymceOptions={onChange:function(t){},inline:!1,plugins:"advlist autolink link image lists charmap print preview youtube",toolbar:"youtube",theme:"modern",skin:"light"},t.update=function(o){var r=t.editor.title,l=(t.editor.content,"admin");e({url:"http://localhost:8080/news/",method:"POST",dataType:"json",headers:{"Content-Type":"application/json; charset=utf-8",title:r,permission:l},data:"'"+t.editor.content+"'"}).success(function(t,e,o){n.success("News article updated!",'<a href="localhost:8080/news.slug">View post</a>',{allowHtml:!0,closeButton:!0})}).error(function(t,e,o){n.error("Login Success","Article failed to Update :(")})}}]);