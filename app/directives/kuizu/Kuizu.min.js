"use strict";angular.module("app.kuizu",["config"]).directive("kuizu",function(){var a="";return{restrict:"AEC",scope:{datasource:"="},templateUrl:a+"directives/kuizu/kuizu.html",controller:function(e,c,d,b,h,g,f){e.datasource=b.datasource;console.log(e.datasource);e.start=function(){e.id=0;e.score=0;e.quizOver=false;e.inProgress=true;e.questionStatus=true;e.fileExists=false;e.kuizuComplete="";e.getQuestion()};e.reset=function(){e.inProgress=false;e.score=0};e.getQuestion=function(){var i=e.readQuestion(e.id);g(function(){if(i){e.question=i.question;e.options=i.options;e.answer=i.answer;e.answerMode=true;e.questionStatus=true}else{if(e.score==0){if(!e.id>0){e.fileExists=true}}e.quizOver=true;var j=e.datasource.replace(".json","complete");c.kuizuComplete=j}e.correctAns=false;e.wrongAns=false},500)};e.checkAnswer=function(i){if(i.option){return}if(i==e.options[e.answer]){e.score++;e.correctAns=true;e.wrongAns=false}else{e.wrongAns=true;e.correctAns=false}e.questionStatus=false;e.id++;e.getQuestion()};e.reset();e.readQuestion=function(i){if(e.questions!=null&&i<e.questions.length){return e.questions[i]}return false};e.loadQuestions=function(){h({url:backend+"/quiz/"+e.datasource,method:"GET",dataType:"json",data:null,headers:null}).success(function(j,i,k){e.questions=j}).error(function(j,i,k){console.log("The file doesn't exist - please contact the site owner")})};e.loadQuestions()},link:function(c,d,b){}}});